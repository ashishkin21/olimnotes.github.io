<nav aria-label="Auxiliary" class="aux-nav">
    <ul class="aux-nav-list">
      {% for link in site.aux_links %}
        <li class="aux-nav-list-item">
          <a href="{{ link.last }}" class="site-button"
            {% if site.aux_links_new_tab %}
            target="_blank" rel="noopener noreferrer"
            {% endif %}
          >
            {{ link.first }}
          </a>
        </li>
      {% endfor %}
      <li>
        <p>
          <button class="btn js-toggle-dark-mode">
            Preview dark color scheme
          </button>
        </p>
        <script> 
          const toggleDarkMode = document.querySelector('.js-toggle-dark-mode'); 
          
          // Get the stored theme from local storage, or default to 'light'
          const storedTheme = localStorage.getItem('theme') || 'light';
          jtd.setTheme(storedTheme);
          if (storedTheme === 'dark') {
            toggleDarkMode.textContent = 'Return to the light side';
          }

          jtd.addEvent(toggleDarkMode, 'click', function() {
            if (jtd.getTheme() === 'dark') {
              jtd.setTheme('light');
              toggleDarkMode.textContent = 'Preview dark color scheme';
              localStorage.setItem('theme', 'light');
            } else {
              jtd.setTheme('dark');
              toggleDarkMode.textContent = 'Return to the light side';
              localStorage.setItem('theme', 'dark');
            }
          });
        </script>
      </li>
    </ul>
  </nav>